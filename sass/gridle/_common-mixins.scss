// |------------------------------------------------------
// |------------------------------------------------------
// | Common mixins
// |------------------------------------------------------
// |------------------------------------------------------

@mixin _gridle_container_common(
	$state : default
) {
	@extend %gridle-simple-clearfix;
	@extend %gridle-container-common;
	// debug part
	$debug : gridle_get_state_var(debug, $state);
	@if ($debug == true) {
		#{$gridle-debug-selector} {
			@extend %gridle-container-debug-common;
		}
	}
}
$_gridle-already-generated : ();
@mixin _gridle_grid_common() {
	// @extend %gridle-grid-common;
	display:inline-block;
	min-height:1px;

	-webkit-box-sizing: border-box;
	-moz-box-sizing: border-box;
	box-sizing: border-box;

	// default values
	$default-gutter-width : gridle_get_state_var(gutter-width, default);
	$default-direction : gridle_get_state_var(direction, default);

	// loop on each states :
	@each $stateName, $state in $_gridle-states
	{
		// selector key to be used in map
		$key : "#{$stateName} #{&}";

		// check if already generated classes
		$already-generated : map-has-key($_gridle-already-generated, $key);

		// vars
		$direction : gridle_get_state_var(direction, $state);
		$classes : gridle_get_state_var(classes, $state);
		$gutter-width : gridle_get_state_var(gutter-width, $state);
		$debug : gridle_get_state_var(debug, $state);

		@if $already-generated != true and $classes and ( ($default-direction != $direction or $default-gutter-width != $gutter-width) or $stateName == default)
		{
			// set that we have already generated css for this selector
			$_gridle-already-generated : map-set($_gridle-already-generated, $key, true) !global;
			
			// generate the css for this element
			@include gridle_state($state) {
				@if $direction != $default-direction or $stateName == default {
					// content : "#{$key}";
					@if $direction == rtl {
						float:right;
						direction:rtl;
					} @else {
						float:left;
						direction:ltr;
					}
				}
				@if $gutter-width != $default-gutter-width or $stateName == default {
					padding-left:$gutter-width/2;
					padding-right:$gutter-width/2;
				}
			}
			
			@if $debug == true {
				#{$gridle-debug-selector} {
					&:before,
					&:after {
						content:"";
						display:block;
						background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDowRkEzNzVFNTg1NjgxMUUyOUI4RjhEMzg4QzM4QjZFOCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDowRkEzNzVFNjg1NjgxMUUyOUI4RjhEMzg4QzM4QjZFOCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjBGQTM3NUUzODU2ODExRTI5QjhGOEQzODhDMzhCNkU4IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjBGQTM3NUU0ODU2ODExRTI5QjhGOEQzODhDMzhCNkU4Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8++5+BhQAAAA9JREFUeNpiYGBgkAIIMAAAHwAbZIBtGgAAAABJRU5ErkJggg==);
						margin:10px 0;
						padding:5px 0;
						text-align:center;
						color:white;
						font-size:11px;
						-webkit-box-sizing: border-box;
						-moz-box-sizing: border-box;
						box-sizing: border-box;
						display:block !important;
					}
					background-color:#daeff5;
				}
			}
		}
	}
}
@mixin _gridle_parent_common() {
	@extend %gridle-clearfix;
	@extend %gridle-parent-common;
}
@mixin _gridle_push_common(
	$state : default
) {
	$debug : gridle_get_state_var(debug, $state);

	// extend common :
	@extend %gridle-push-pull-common;
	@if $debug == true {
		#{$gridle-debug-selector} {
			@extend %gridle-push-pull-debug-background-common;
			background-color:#f4efdf !important;
		}
	}
}
@mixin _gridle_pull_common(
	$state : default
) {
	$debug : gridle_get_state_var(debug, $state);

	@extend %gridle-push-pull-common;
	@if $debug == true {
		#{$gridle-debug-selector} {
			@extend %gridle-push-pull-debug-background-common;
			background-color:#cfe4d5 !important;
		}
	}
}
@mixin _gridle_prefix_common(
	$state : default
) {
	$debug : gridle_get_state_var(debug, $state);
	@if $debug == true {
		#{$gridle-debug-selector} {
			@extend %gridle-prefix-debug-common;
		}
	}
}
@mixin _gridle_suffix_common(
	$state : default
) {
	$debug : gridle_get_state_var(debug, $state);
	@if $debug == true {
		#{$gridle-debug-selector} {
			@extend %gridle-suffix-debug-common;
		}
	}
}